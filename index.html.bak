<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Roblox Combo Checker</title>
<style>
body {
  background:linear-gradient(180deg,#4b0082,#6a0dad);
  font-family:sans-serif;
  color:white;
  margin:0;
}
.container {
  max-width:900px;
  margin:auto;
  padding:20px;
}
h1 { text-align:center; }

.stats {
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:15px;
  margin-bottom:20px;
}
.card {
  background:rgba(255,255,255,.15);
  padding:15px;
  border-radius:15px;
  text-align:center;
}

.controls {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-bottom:20px;
}

button {
  padding:12px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}

.upload { background:#ffc107; }
.start { background:#28a745; color:white; }
.reset { background:#dc3545; color:white; }

.output {
  background:rgba(0,0,0,.4);
  padding:15px;
  border-radius:15px;
  max-height:350px;
  overflow:auto;
  white-space:pre-wrap;
  font-family:monospace;
}
.live { color:#00ff7f; }
</style>
</head>

<body>
<div class="container">

<h1>ROBLOX COMBO CHECKER</h1>

<div class="stats">
  <div class="card">AKUN LIVE<br><b id="live">0</b></div>
  <div class="card">AKUN INVALID<br><b id="dead">0</b></div>
  <div class="card">TOTAL COMBO<br><b id="total">0</b></div>
</div>

<div class="controls">
  <input type="file" id="file">
  <button class="start" onclick="start()">START</button>
  <button class="reset" onclick="reset()">RESET</button>
</div>

<div class="output" id="output">
Belum ada combo diunggah.
</div>

</div>

<script>
let combos = [];

document.getElementById("file").addEventListener("change", e => {
  const reader = new FileReader();
  reader.onload = () => {
    combos = reader.result
      .split("\n")
      .map(x => x.trim())
      .filter(Boolean)
      .map(x => x.split(":")[0]);
    document.getElementById("total").innerText = combos.length;
  };
  reader.readAsText(e.target.files[0]);
});

async function start() {
  let live = 0;
  let dead = 0;
  const out = document.getElementById("output");
  out.innerHTML = "";

  const res = await fetch("/api/check", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ usernames: combos })
  });

  const data = await res.json();

  live = data.live.length;
  dead = combos.length - live;

  document.getElementById("live").innerText = live;
  document.getElementById("dead").innerText = dead;

  data.live.forEach(u => {
    out.innerHTML +=
`[LIVE]
USER: ${u.username}
ID: ${u.userId}
AGE: ${u.age} days
JOIN: ${u.created}
FRIENDS: ${u.friends}
FOLLOWERS: ${u.followers}
BANNED: ${u.banned}

`;
  });
}

function reset() {
  combos = [];
  document.getElementById("output").innerHTML = "Reset.";
  document.getElementById("live").innerText = 0;
  document.getElementById("dead").innerText = 0;
  document.getElementById("total").innerText = 0;
}
</script>

</body>
</html>