<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SKY LAND REAL WEBSITE - LOGIN</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:radial-gradient(circle at top,#7b2cbf,#4c0f8c);
  color:#fff;
}
.container{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  padding:20px;
  max-width:420px;
  margin:auto;
}

/* LOGO */
.logo-box{display:flex;justify-content:center;margin-bottom:14px}
.logo{
  width:110px;height:110px;border-radius:50%;padding:6px;
  background:linear-gradient(45deg,#22c55e,#a855f7,#22c55e);
  animation:glow 4s infinite;
}
.logo img{width:100%;height:100%;border-radius:50%}
@keyframes glow{
  0%{box-shadow:0 0 10px #22c55e}
  50%{box-shadow:0 0 30px #a855f7}
  100%{box-shadow:0 0 10px #22c55e}
}

/* TEXT */
h1{text-align:center;font-size:18px;margin:6px 0}
p{text-align:center;font-size:13px;opacity:.9;margin-bottom:20px}

/* FORM */
input{
  width:100%;
  padding:14px;
  margin-bottom:10px;
  border:none;
  border-radius:14px;
  font-size:14px;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:14px;
  margin-top:8px;
}
.login{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#000;
  font-weight:bold;
}
.daftar{
  background:#dc2626;
  color:#fff;
}
.msg{
  text-align:center;
  margin-top:10px;
  font-size:13px;
}
</style>
</head>

<body>

<div class="container">

<div class="logo-box">
  <div class="logo">
    <img src="https://files.catbox.moe/hz53ab.jpg">
  </div>
</div>

<h1>SKY LAND REAL WEBSITE</h1>
<p>LOGIN TO WEBSITE</p>

<input type="text" id="username" placeholder="Masukan Username">
<input type="password" id="password" placeholder="Masukan Password">

<button class="login" onclick="login()">LOGIN</button>
<button class="daftar" onclick="location.href='daftar.html'">DAFTAR</button>

<div class="msg" id="msg"></div>

</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

// ðŸ”¹ Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCkWKmK_UmQtk6UEIset5e6iPmFZj0ZLHc",
  authDomain: "bugemtoolsdb.firebaseapp.com",
  databaseURL: "https://bugemtoolsdb-default-rtdb.firebaseio.com",
  projectId: "bugemtoolsdb",
  storageBucket: "bugemtoolsdb.firebasestorage.app",
  messagingSenderId: "52270788635",
  appId: "1:52270788635:web:59bf1c23406beb872e48be",
  measurementId: "G-SHMYMXM4Z4"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.login = async ()=>{
  const u = document.getElementById("username").value.trim();
  const p = document.getElementById("password").value.trim();
  const msg = document.getElementById("msg");

  msg.innerText = ""; // reset

  if(!u || !p){
    msg.innerText = "Username & Password wajib diisi";
    return;
  }

  try{
    const userRef = ref(db,"users/"+u);
    const snap = await get(userRef);

    if(!snap.exists()){
      msg.innerText = "Username tidak terdaftar";
      return;
    }

    if(snap.val().password !== p){
      msg.innerText = "Password salah";
      return;
    }

    localStorage.setItem("skyland_user", u);
    location.href = "index.html";

  } catch(e) {
    msg.innerText = "Gagal login, coba lagi";
    console.error("Login error:", e);
  }
}
</script>

</body>
</html>